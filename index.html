<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Previous ktu question papers. 2019 scheme. "
    />
    <link rel="stylesheet" href="./css/style.css" />
    <title>KTUPapers</title>
  </head>
  <body>
    <header>
      <nav class="container">
        <ul>
          <li><a href="#">home</a></li>
          <li><a href="#">contact us</a></li>
        </ul>
      </nav>
    </header>
    <section class="landing container">
      <h1>ktu question papers.</h1>
      <h2>Find previous papers with ease</h2>

      <h2 class="grey">Currently serves Information Technology papers</h2>

      <a href="./upload.html" class="btn-primary"
        >Upload a paper<img src="./icons/cloud.svg" alt=""
      /></a>
    </section>

    <main class="container">
      <label for="sem-select">Sort by Semester</label>
      <select name="sem-select" id="sem-select">
        <option value="">All</option>
        <option value="">S3</option>
        <option value="">S4</option>
        <option value="5">S5</option>
      </select>

      <div class="course-container">
        <div class="course">
          <p>ITT 504</p>
          <h3>Data Communication and networking</h3>
          <div class="links">
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
          </div>
        </div>
        <div class="course">
          <p>ITT 504</p>
          <h3>Operating Systems</h3>
          <div class="links">
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
          </div>
        </div>
        <div class="course">
          <p>ITT 504</p>
          <h3>Formal Languages</h3>
          <div class="links">
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
          </div>
        </div>
        <div class="course">
          <p>ITT 504</p>
          <h3>Data Communication and networking</h3>
          <div class="links">
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
          </div>
        </div>
        <div class="course">
          <p>ITT 504</p>
          <h3>Data Communication and networking</h3>
          <div class="links">
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
            <div class="link">
              <span>2021 Dec</span>
              <a href="">Question paper</a>
              <a href="">Answer Key</a>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="container">
      Open source at
      <a href="https://github.com/">Github</a>
    </footer>

    <script type="module">
      const courseContainer = document.querySelector(".course-container");

      const response = await fetch(
        "https://6571c5b6d61ba6fcc01384bb.mockapi.io/papers"
      );
      const data = await response.json();

      function getFormattedDate(date) {
        let _date = new Date(date);
        return _date.toLocaleString("en-US", {
          year: "numeric",
          month: "short",
        });
      }

      data.forEach((course) => {
        const courseEl = document.createElement("div");
        courseEl.classList.add("course");

        const currCourse = course.courseCode;

        courseEl.innerHTML = `
        <p>${course.courseCode}</p>
        <h3>${course.courseName}</h3>
        <div class="links">
          ${data
            .filter((_course) => _course.courseCode === currCourse)
            .map((course) => {
              return `<div class="link">
              <span>${getFormattedDate(course.year)}</span>
              <a href="${course.questionLink}">Question paper</a>
              <a href="${course.answerLink}">Answer Key</a>
            </div>`;
            })
            .join("")}

        </div>
        `;

        courseContainer.insertAdjacentElement("afterbegin", courseEl);
      });

      console.log(data);
    </script>
  </body>
</html>
